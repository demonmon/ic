---
title: ecc原理
updated: 2022-03-21T15:39:07.0000000+08:00
created: 2022-03-20T11:01:40.0000000+08:00
---

群
由于椭圆曲线的点加法和点乘法离不开群的相关概念，在此我提一下，如果是离散数学学的比较好的朋友可以跳过本部分。
群G只定义一个二元运算，即两个元素对一个运算符号的运算。群满足四个基本条件：封闭性、结合律、单位元、逆元。
封闭性：G中两元素的运算结果还在这个群中。
结合律：对G中任意元素a、b、c，都有a·(b·c)=(a·b)·c
单位元：对单位元e，G中任意元素a都有a·e=e·a=a成立
逆元：对G中任意元素a，G中都存在一个元素a’,使得a·a’=a’·a=e成立
**[加密算法](https://so.csdn.net/so/search?q=%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95&spm=1001.2101.3001.7020)中常用到模p加法和模p乘法；**
** ** 模p加法：(a + b) % p ，其结果是a+b算术和除以p的余数，也就是说，(a+b) = kp +r，则(a + b) % p = r。 逆元则是结果为0
  模p乘法：(a \* b) % p，其结果是 a \* b算术乘法除以p的余数。逆元则是结果为1

有限域上椭圆曲线上的点和有限域上椭圆曲线上的运算会构成一个群，椭圆曲线上的有限点个数n称为该群的秩Order。下面定义有限域上椭圆曲线的运算即几何加法运算。我们可以重新思考连续椭圆曲线上的我们定义的运算法则了，有限域上的椭圆曲线几何加法和连续椭圆曲线上的几何加法法则一致，对于两点P和Q，定义P+Q的结果为P和Q的连线交有限域内一点，该点关于“某条线”的在有限域内的对称点即为P+Q的结果R点。这里存在与连续椭圆曲线不一致的两个问题：
第一，P和Q的连线可能不再那么自然，在一个无限大的坐标平面中我们可以随意地画一条直线，但在模运算中这个坐标系是有边界的，这条直线如果画出来直观上看会呈现一定的周期性。
第二，这里的某条线不能再是横轴了，因为我们令坐标系中x∈\[0,p-1\]，y∈\[0,p-1\]，因此这条对称直线实际上就是y=p/2，这里的p就是有限域的阶。关于这点的证明可以通过设域中的一点坐标，找到纵坐标关于y=p/2的对称点，代入原来的横坐标看等式两边是否能保持成立。

那么我们现在的问题是如何计算P+P得到的点的坐标。回忆在连续椭圆曲线上的公式，其实就是找椭圆曲线P点的切线交椭圆曲线于一点，然后关于x轴对称。那么我们现在的问题是在有限域中全都是离散点，无从找切线。那么其实在这里我们的切线斜率还是可以使用连续椭圆曲线推导出来的切线求导公式：

![image1](image1-22.png)![image2](image2-18.png)
![[Pasted image 20220805201256.png]] 