## 时序约束

### 时钟定义


![[Pasted image 20221025210220.png]]

时钟定义

![[Pasted image 20221025211933.png]]

 
![[Pasted image 20221025212132.png]]


这是虚拟时钟 ---跟io相关
input delay

![[Pasted image 20221025212344.png]]

### 时钟之间关系

同步与异步
[[跨时钟域电路设计-上#同步时钟/异步时钟|同步与异步时钟]]


![[Pasted image 20221025213325.png]]

设置异步关系

![[Pasted image 20221025213312.png]]

物理上能同时存在，逻辑上互斥--选择器--逻辑上异步
![[Pasted image 20221025213755.png]]


物理上互斥
物理上不能同时存在
![[Pasted image 20221025213845.png]]

scan clock

### 时钟属性


transition---
![[Pasted image 20221025214236.png]]

uncertainty = jitter + skew + implemention margin（裕量）
![[Pasted image 20221025215001.png]]

![[Pasted image 20221025215104.png]]



### IO约束


注意图里表示的input delay  和 output delay 

![[Pasted image 20221026155127.png]]

输入的transition 输出的output load（和负载电容相关）
![[Pasted image 20221026155532.png]]


下面v_clk_pll_out是虚拟时钟
一般比例给外部和内部留多少，外部60% 内部40% 

![[Pasted image 20221026155902.png]]

output delay片内 delay更为苛刻，占20%


![[Pasted image 20221026160206.png]]


![[Pasted image 20221026160054.png]]

input transition 不要固定一个值
可以从工艺库找一个器件在片外输入
根据驱动能力强弱的器件来决定transition
![[Pasted image 20221026160326.png]]

输出也不是写死一个数，也是挑一个器件


![[Pasted image 20221026160829.png]]


### 设计规则约束（DRC）

- max_transition
- max_fanout 
- max_capacitance
- etc

![[Pasted image 20221026161241.png]]


**max_transition**
物理属性--也和timing相关

![[Pasted image 20221026161527.png]]



![[Pasted image 20221026161836.png]]

只有fanout可以控制

![[Pasted image 20221026161941.png]]

### 时序特例

跨时钟域就不需要做静态时序分析

这是修不了不好改才去多周期路径
对于组合逻辑很长，超过一个周期 --- 多周期路径
![[Pasted image 20221027145944.png]]


![[Pasted image 20221027150748.png]]


需要设置双向，成对的设：clk2 to clk1 , clk1 to clk2
也可以设置异步group关系
![[Pasted image 20221027154249.png]]
![[Pasted image 20221027153825.png]]

![[Pasted image 20221027154357.png]]


综合会加入mux，更加接近真实情况
扫描链，就会加一个mux选另外一个clk

![[Pasted image 20221027154522.png]]
![[Pasted image 20221027154837.png]]










